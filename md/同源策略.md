# 同源策略

## 一、什么是同源策略Same-Origin-Policy（SOP）

同源：协议+主机+端口号 相同(<i>注：IE在计算源的时候没有包括端口</i>)
策略：只有在两个页面有相同的源时，web浏览器允许第一个页面的脚本访问第二个页面里的数据

## 二、为什么要有同源策略

1. 同源策略是浏览器的行为，是为了保护本地数据不被JavaScript代码获取回来的数据污染，因此拦截的是客户端发出的请求回来的数据接收，即请求发送了，服务器响应了，但是无法被浏览器接收。
2. 如果缺少了同源策略，浏览器很容易受到 XSS、 CSFR 等攻击。

### 同源策略类型

#### ①、DOM 同源策略

>禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的(比如一个恶意网站的页面通过iframe嵌入了银行的登录页面（二者不同源），如果没有同源限制，恶意网页上的javascript脚本就可以在用户登录银行的时候获取用户名和密码)

#### ②、XMLHttpRequest 同源策略

>禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求(这一点里面其实包括了 ajax)。

#### ③、Cookie、LocalStorage、IndexedDB 等存储性内容同源策略

>js中无法访问不属于同个源的cookie、LocalStorage中存储的内容。

## 什么是DNS劫持

DNS劫持bai又叫域名劫持，指攻击du者利用其他攻击手段，篡zhi改了某个域名的dao解析结果，使得指向该域名的IP变成了另一个IP，导致对相应网址的访问被劫持到另一个不可达的或者假冒的网址，从而实现非法窃取用户信息或者破坏正常网络服务的目的。

## 参考

+ [前端跨域系列（1）- 同源策略介绍](https://juejin.im/post/6879360544323665928)