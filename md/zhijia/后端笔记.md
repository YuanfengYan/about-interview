# 笔记

## 数据库查询

### 一 数据库查询基础语法

1. 查询表 table_name  中id是xxx的所有行
`SELECT * FROM table_name  WHERE id = "xxxx";`

2. 查询表 table_name  所有字段，并按 _id 进行升序列出,
`SELECT * FROM table_name  ORDER BY _id;`

3. 查询表 table_name  所有字段，并按 _id 进行升序，列出前10条
`SELECT * FROM table_name ORDER BY _id LIMIT 10;`

4. 查询名字以 "A" 开头的员工：
`SELECT * FROM table_name WHERE name LIKE 'A%';`

 + % 表示任意数量的字符。
 + _ 表示一个字符。

 5. 多条件查询 (AND, OR)
`SELECT * FROM table_name WHERE condition1 AND condition2;`
`SELECT * FROM table_name WHERE condition1 OR condition2;`
`SELECT * FROM employees WHERE age > 30 AND gender = 'M';`

6. 聚合函数 MySQL 提供了一些常用的聚合函数，如 COUNT()、SUM()、AVG()、MIN()、MAX()

 查询 employees 表中有多少员工 `SELECT COUNT(*) FROM employees;`
 查询所有员工的薪资总和： `SELECT SUM(salary) FROM employees;`
 查询员工的平均年龄： `SELECT AVG(age) FROM employees;`

7. 分组查询 (GROUP BY) 
GROUP BY 用于将查询结果分组，通常与聚合函数一起使用。
按 department 分组，查询每个部门的员工数量：

`SELECT department, COUNT(*) FROM employees GROUP BY department;`

8.  筛选分组结果 (HAVING)
HAVING 用于过滤 GROUP BY 后的结果，类似于 WHERE，但 HAVING 用于聚合结果。

-  查询有多名员工的部门：`SELECT department, COUNT(*) FROM employees GROUP BY department HAVING COUNT(*) > 1;`

9. 连接查询 (JOIN)

+ 内连接 (INNER JOIN)
它返回两个表中 匹配的记录，如果某个表中没有匹配的记录，则该记录不会出现在结果集中。
```sql
-- 查询员工与其部门信息：没部门的不会显示
SELECT employees.name, employees.age, departments.department_name
FROM employees
INNER JOIN departments ON employees.department_id = departments.department_id;
```
+ 左连接 (LEFT JOIN)
LEFT JOIN 返回左表的所有记录，以及右表中匹配的记录。如果右表没有匹配的记录，右表的字段将返回 NULL。
```sql
-- 查询所有员工及其部门信息，即使有些员工没有部门：
SELECT employees.name, employees.age, departments.department_name
FROM employees
LEFT JOIN departments ON employees.department_id = departments.department_id;
```

+ 右链接 RIGHT JOIN 同上类似